/* Mobile-First Utility Classes */

/* Enhanced Touch Targets */
@layer utilities {
  .touch-safe {
    @apply min-h-[44px] min-w-[44px];
  }
  
  .touch-comfortable {
    @apply min-h-[48px] min-w-[48px];
  }
  
  .touch-compact {
    @apply min-h-[36px] min-w-[36px];
  }
}

/* Mobile Typography */
@layer utilities {
  .text-mobile-xs {
    font-size: 0.625rem; /* 10px */
    line-height: 1rem;
  }
  
  .text-mobile-sm {
    font-size: 0.75rem; /* 12px */
    line-height: 1.125rem;
  }
  
  .text-mobile-base {
    font-size: 0.875rem; /* 14px */
    line-height: 1.25rem;
  }
  
  .text-mobile-lg {
    font-size: 1rem; /* 16px */
    line-height: 1.5rem;
  }
  
  .text-mobile-xl {
    font-size: 1.125rem; /* 18px */
    line-height: 1.75rem;
  }
}

/* Mobile Spacing Utilities */
@layer utilities {
  .mobile-p-xs {
    @apply p-2;
  }
  
  .mobile-p-sm {
    @apply p-3;
  }
  
  .mobile-p-md {
    @apply p-4;
  }
  
  .mobile-m-xs {
    @apply m-2;
  }
  
  .mobile-m-sm {
    @apply m-3;
  }
  
  .mobile-m-md {
    @apply m-4;
  }
}

/* Safe Area Insets for iOS */
@layer utilities {
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }
  
  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }
  
  .safe-left {
    padding-left: env(safe-area-inset-left);
  }
  
  .safe-right {
    padding-right: env(safe-area-inset-right);
  }
  
  .safe-x {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
  
  .safe-y {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
  }
}

/* Mobile Scroll Improvements */
@layer utilities {
  .scroll-smooth-mobile {
    -webkit-overflow-scrolling: touch;
    scroll-behavior: smooth;
  }
  
  .scroll-snap-x {
    scroll-snap-type: x mandatory;
    -webkit-overflow-scrolling: touch;
  }
  
  .scroll-snap-y {
    scroll-snap-type: y mandatory;
    -webkit-overflow-scrolling: touch;
  }
  
  .snap-start {
    scroll-snap-align: start;
  }
  
  .snap-center {
    scroll-snap-align: center;
  }
  
  .snap-end {
    scroll-snap-align: end;
  }
  
  .overscroll-none {
    overscroll-behavior: none;
  }
  
  .overscroll-contain {
    overscroll-behavior: contain;
  }
}

/* Mobile Grid Utilities */
@layer utilities {
  .mobile-grid-1 {
    @apply grid-cols-1;
  }
  
  .mobile-grid-2 {
    @apply grid-cols-2;
  }
  
  @media (min-width: 475px) {
    .xs\:mobile-grid-3 {
      @apply grid-cols-3;
    }
  }
  
  @media (min-width: 640px) {
    .sm\:mobile-grid-4 {
      @apply grid-cols-4;
    }
  }
}

/* Mobile Card Styles */
@layer utilities {
  .mobile-card {
    @apply bg-card rounded-lg p-3 shadow-sm;
  }
  
  .mobile-card-sm {
    @apply bg-card rounded-md p-2 shadow-sm;
  }
  
  .mobile-card-lg {
    @apply bg-card rounded-xl p-4 shadow-md;
  }
}

/* Mobile Button Styles */
@layer utilities {
  .mobile-btn {
    @apply px-4 py-2.5 rounded-lg font-medium touch-safe transition-all active:scale-95;
  }
  
  .mobile-btn-sm {
    @apply px-3 py-2 rounded-md text-sm font-medium touch-compact transition-all active:scale-95;
  }
  
  .mobile-btn-lg {
    @apply px-5 py-3 rounded-lg text-lg font-semibold touch-comfortable transition-all active:scale-95;
  }
}

/* Mobile List Styles */
@layer utilities {
  .mobile-list-item {
    @apply py-3 px-4 border-b border-border last:border-b-0 transition-colors active:bg-muted;
  }
  
  .mobile-list-interactive {
    @apply py-3 px-4 border-b border-border last:border-b-0 transition-all active:bg-muted active:scale-[0.98];
  }
}

/* Mobile Modal/Drawer Styles */
@layer utilities {
  .mobile-drawer {
    @apply fixed inset-x-0 bottom-0 z-50 bg-background rounded-t-xl shadow-xl;
    max-height: calc(100vh - 3rem);
    animation: slide-up 0.3s ease-out;
  }
  
  .mobile-modal {
    @apply fixed inset-4 z-50 bg-background rounded-xl shadow-2xl;
    max-height: calc(100vh - 2rem);
    animation: scale-in 0.2s ease-out;
  }
  
  .mobile-overlay {
    @apply fixed inset-0 z-40 bg-black/50 backdrop-blur-sm;
    animation: fade-in 0.2s ease-out;
  }
}

/* Mobile Performance Optimizations */
@layer utilities {
  .will-change-mobile {
    will-change: transform;
  }
  
  .hardware-accelerate {
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }
  
  .no-tap-highlight {
    -webkit-tap-highlight-color: transparent;
    tap-highlight-color: transparent;
  }
  
  .touch-manipulation {
    touch-action: manipulation;
  }
}

/* Mobile-specific Animations */
@keyframes slide-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes scale-in {
  from {
    transform: scale(0.95);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* Mobile Loading States */
@layer utilities {
  .skeleton-mobile {
    @apply bg-gradient-to-r from-gray-200 via-gray-300 to-gray-200 bg-[length:200%_100%] animate-shimmer;
  }
  
  .animate-shimmer {
    animation: shimmer 1.5s ease-in-out infinite;
  }
}

/* Responsive Hide/Show Utilities */
@layer utilities {
  .mobile-only {
    @apply block sm:hidden;
  }
  
  .tablet-only {
    @apply hidden sm:block md:hidden;
  }
  
  .desktop-only {
    @apply hidden md:block;
  }
  
  .mobile-hide {
    @apply hidden sm:block;
  }
  
  .tablet-hide {
    @apply block sm:hidden md:block;
  }
}

/* Mobile Form Utilities */
@layer utilities {
  .mobile-input {
    @apply w-full px-3 py-2.5 text-base border border-input rounded-lg bg-background 
           focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent
           disabled:opacity-50 disabled:cursor-not-allowed
           touch-safe;
  }
  
  .mobile-select {
    @apply mobile-input appearance-none 
           bg-[url("data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%27http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%27%20width%3D%2712%27%20height%3D%2712%27%20fill%3D%27none%27%20stroke%3D%27%23666%27%20stroke-linecap%3D%27round%27%20stroke-linejoin%3D%27round%27%20stroke-width%3D%272%27%3E%3Cpath%20d%3D%27m3%204.5%203%203%203-3%27%2F%3E%3C%2Fsvg%3E")] 
           bg-[length:12px] bg-[right_0.75rem_center] bg-no-repeat pr-10;
  }
  
  .mobile-textarea {
    @apply mobile-input min-h-[100px] resize-y;
  }
}

/* Mobile Navigation Utilities */
@layer utilities {
  .mobile-nav-item {
    @apply flex items-center justify-center flex-col py-2 px-1 text-xs touch-safe transition-colors;
  }
  
  .mobile-nav-active {
    @apply text-primary font-medium;
  }
  
  .mobile-nav-inactive {
    @apply text-muted-foreground;
  }
}

/* Swipeable Container */
@layer utilities {
  .swipeable {
    @apply overflow-x-auto scroll-smooth-mobile flex gap-3 pb-2 -mx-4 px-4;
  }
  
  .swipeable::-webkit-scrollbar {
    display: none;
  }
  
  .swipeable-item {
    @apply flex-shrink-0 snap-start;
  }
}

/* Mobile Responsive Images */
@layer utilities {
  .mobile-img-cover {
    @apply w-full h-full object-cover;
  }
  
  .mobile-img-contain {
    @apply w-full h-full object-contain;
  }
  
  .mobile-img-thumb {
    @apply w-16 h-16 object-cover rounded-lg;
  }
}